(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6191:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c});var r=n(482),o=n(9108),a=n(2563),i=n.n(a),s=n(8300),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);n.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,751)),"/workspaces/tarot-en/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,2917)),"/workspaces/tarot-en/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,9361,23)),"next/dist/client/components/not-found-error"]}],u=["/workspaces/tarot-en/app/page.tsx"],d="/page",f={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},51:(e,t,n)=>{let r={"72e194b10263b4e969a3d7208c7a462a0e3182c7":()=>Promise.resolve().then(n.bind(n,4581)).then(e=>e.getTarotReading)};async function o(e,...t){return(await r[e]()).apply(null,t)}e.exports={"72e194b10263b4e969a3d7208c7a462a0e3182c7":o.bind(null,"72e194b10263b4e969a3d7208c7a462a0e3182c7")}},4085:()=>{},929:(e,t,n)=>{Promise.resolve().then(n.bind(n,1232))},6694:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2583,23)),Promise.resolve().then(n.t.bind(n,6840,23)),Promise.resolve().then(n.t.bind(n,8771,23)),Promise.resolve().then(n.t.bind(n,3225,23)),Promise.resolve().then(n.t.bind(n,9295,23)),Promise.resolve().then(n.t.bind(n,3982,23))},1232:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r={};n.r(r);var o=n(5344),a=n(3729);n(3664);var i=(0,n(8371).$)("72e194b10263b4e969a3d7208c7a462a0e3182c7");function s(){let[e,t]=(0,a.useState)(""),[n,s]=(0,a.useState)([]),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),g=(0,a.useRef)(null);async function h(){if(!e.trim())return;d(!0),c("");let t=[...r.deck].sort(()=>.5-Math.random()).slice(0,3);s(t),c(await i(e,t)),d(!1)}let v=async()=>{if(null!==g.current){p(!0);try{setTimeout(async()=>{let e=await Object(function(){var e=Error("Cannot find module 'html-to-image'");throw e.code="MODULE_NOT_FOUND",e}())(g.current,{cacheBust:!0,backgroundColor:"#1a1a1a",style:{maxHeight:"none",overflow:"visible"}}),t=`tarot-reading-${new Date().toISOString().slice(0,10)}.png`;Object(function(){var e=Error("Cannot find module 'file-saver'");throw e.code="MODULE_NOT_FOUND",e}())(e,t),p(!1)},500)}catch(e){console.error("Failed to generate image:",e),p(!1),alert("Failed to generate image. Please try again.")}}};return(0,o.jsxs)("main",{className:"min-h-screen bg-[#1a1a1a] text-gray-100 flex flex-col items-center p-4 sm:p-8 font-sans",children:[(0,o.jsxs)("header",{className:"mb-8 text-center max-w-2xl w-full",children:[o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Deep Tarot"}),o.jsx("p",{className:"text-gray-400 mt-2 tracking-wide",children:"Dialogue with the Subconscious"})]}),(0,o.jsxs)("section",{className:"w-full max-w-md flex flex-col gap-3 mb-8 z-10 relative",children:[o.jsx("textarea",{className:"w-full p-4 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-purple-500 outline-none resize-none text-base transition-colors",rows:3,placeholder:"What's weighing on your mind right now?...",value:e,onChange:e=>t(e.target.value)}),o.jsx("button",{onClick:h,disabled:u||!e.trim(),className:"w-full py-3 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 font-medium disabled:opacity-50 hover:opacity-90 transition-opacity text-base shadow-lg shadow-purple-500/20",children:u?"Connecting to the flow...":"Draw Cards & Reveal"})]}),n.length>0&&u&&o.jsx("div",{className:"flex gap-2 mb-6 animate-pulse opacity-50",children:[1,2,3].map(e=>o.jsx("div",{className:"w-16 h-24 bg-gray-800 rounded border border-gray-700"},e))}),l&&(0,o.jsxs)("section",{className:"w-full max-w-2xl animate-fade-in",children:[(0,o.jsxs)("div",{ref:g,className:"bg-[#2a2a2a] p-6 sm:p-8 rounded-xl border border-purple-500/30 shadow-2xl",children:[(0,o.jsxs)("div",{className:"mb-6 pb-4 border-b border-gray-700/50",children:[o.jsx("h3",{className:"text-xs uppercase tracking-wider text-purple-400 font-semibold mb-2",children:"Your Question"}),(0,o.jsxs)("p",{className:"text-lg font-serif italic text-gray-200",children:["â€œ",e,"â€"]})]}),o.jsx("div",{className:"flex justify-center gap-4 mb-8 pb-6 border-b border-gray-700/50",children:n.map(e=>(0,o.jsxs)("div",{className:"flex flex-col items-center text-center w-24",children:[(0,o.jsxs)("div",{className:"w-full aspect-[2/3] bg-gray-800 rounded-lg border border-gray-600 mb-2 flex items-center justify-center text-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-purple-900/20 to-transparent"}),e.suit?"\uD83C\uDFB4":"\uD83C\uDFAD"]}),o.jsx("span",{className:"text-xs font-medium text-purple-300 leading-tight",children:e.name})]},e.name))}),o.jsx("div",{className:"prose prose-invert prose-purple max-w-none prose-p:leading-relaxed prose-li:marker:text-purple-400",children:o.jsx(Object(function(){var e=Error("Cannot find module 'react-markdown'");throw e.code="MODULE_NOT_FOUND",e}()),{children:l})}),o.jsx("div",{className:"text-center text-gray-600 text-[10px] mt-8 pt-4 border-t border-gray-800/50 uppercase tracking-widest",children:"Generated by Deep Tarot AI"})]}),(0,o.jsxs)("button",{onClick:v,disabled:f,className:"mt-6 w-full sm:w-auto mx-auto block px-6 py-3 rounded-full bg-[#333] hover:bg-[#444] border border-gray-600 text-sm transition-colors flex items-center justify-center gap-2",children:[f?o.jsx("span",{className:"inline-block w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",x2:"12",y1:"15"}),o.jsx("line",{x1:"12",x2:"3",y1:"3"})]}),f?"Generating Image...":"Save Reading as Image"]})]})]})}(function(){var e=Error("Cannot find module 'react-markdown'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module 'html-to-image'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'file-saver'");throw e.code="MODULE_NOT_FOUND",e}()},8371:(e,t,n)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return o}});let r=n(3664);function o(e){let{createServerReference:t}=n(2228);return t(e,r.callServer)}},4581:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getTarotReading:()=>l});var r=n(8601);n(5811);var o=n(8190),a=n(6893);let i=new o.GoogleGenerativeAI(process.env.API_KEY||""),s=`
# Role: Your Blunt, Insightful Friend & Deep-Dive Guide (The "Bali Local" Persona)

## The Persona
You are not an AI that just recites card definitions. You are an "old friend" who has lived in Bali for a long time, seen it all, speaks candidly but with compassion.
Speak as if you are sitting in a cafe, looking the user in the eye. Keep the tone concise, grounded, and slightly spiritual but not "woo-woo."

## ðŸš« Anti-Robot Rules - Absolutely Forbidden:
1. NO formal titles (e.g., "## Analysis").
2. NO mechanical transitions (e.g., "Based on the first card...").
3. NO ambiguity (Don't say "it might mean," say "it clearly indicates").

## ðŸ—£ï¸ Conversation Flow:
Strictly follow this structure and MUST use the specified Emoji at the beginning of paragraphs:

ðŸ›‘ [A short ice-breaker here. Acknowledge the user's vibe or the question. Don't interpret cards yet.]
(Empty line)
ðŸƒ [The Storytelling. Weave the three cards into a ONE coherent story. Analyze the situation, the blockage, and the subconscious flow.]
(Empty line)
ðŸ”® [Key Insights. What is the core truth? Mark the most important point with ðŸ‘‰ or âš ï¸.]
(Empty line)
ðŸ§  [The Reality Check. Ask a soul-searching question based on psychology, not tarot. Something to make them think.]

## Output Requirements
Language: English (Natural, conversational, slightly poetic but direct).
Tone: Warm, sharp, "human-like."

---
User's Question: "{question}"
Cards Drawn: {cardInfo}
`;async function l(e,t){try{let n=t.map(e=>e.name).join(", "),r=i.getGenerativeModel({model:"gemini-2.5-flash-lite"}),o=s.replace("{cardInfo}",n).replace("{question}",e),a=await r.generateContent(o);return(await a.response).text()}catch(e){return console.error("Error generating tarot reading:",e),"\uD83D\uDED1 Signal interrupted.\n\n\uD83C\uDCCF The energy flow encountered a blockage in the deep subconscious.\n\n\uD83D\uDD2E Please try reconnecting later (refresh the page)."}}(0,a.ensureServerEntryExports)([l]),(0,r.createActionProxy)("72e194b10263b4e969a3d7208c7a462a0e3182c7",l)},2917:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c,metadata:()=>l});var r=n(5036),o=n(569),a=n.n(o),i=n(6550),s=n.n(i);n(2),n(7272);let l={title:"è¡ŒåŠ¨å¡”ç½— - Action Tarot",description:"Your blunt, insightful tarot friend."};function c({children:e}){return r.jsx("html",{lang:"zh-CN",children:r.jsx("body",{className:`${a().variable} ${s().variable} font-sans`,children:e})})}},751:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>a,__esModule:()=>o,default:()=>i});let r=(0,n(6843).createProxy)(String.raw`/workspaces/tarot-en/app/page.tsx`),{__esModule:o,$$typeof:a}=r,i=r.default},8601:(e,t,n)=>{"use strict";Object.defineProperty(t,"createActionProxy",{enumerable:!0,get:function(){return o}});let r=n(9489);function o(e,t){return(0,r.registerServerReference)(t,e,null)}},6893:(e,t)=>{"use strict";function n(e){for(let t=0;t<e.length;t++){let n=e[t];if("function"!=typeof n)throw Error(`A "use server" file can only export async functions, found ${typeof n}.`)}}Object.defineProperty(t,"ensureServerEntryExports",{enumerable:!0,get:function(){return n}})},8226:e=>{"use strict";(()=>{var t={491:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let r=n(223),o=n(172),a=n(930),i="context",s=new r.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,o.registerGlobal)(i,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,n,...r){return this._getContextManager().with(e,t,n,...r)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,o.getGlobal)(i)||s}disable(){this._getContextManager().disable(),(0,o.unregisterGlobal)(i,a.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let r=n(56),o=n(912),a=n(957),i=n(172);class s{constructor(){function e(e){return function(...t){let n=(0,i.getGlobal)("diag");if(n)return n[e](...t)}}let t=this;t.setLogger=(e,n={logLevel:a.DiagLogLevel.INFO})=>{var r,s,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=e.stack)&&void 0!==r?r:e.message),!1}"number"==typeof n&&(n={logLevel:n});let c=(0,i.getGlobal)("diag"),u=(0,o.createLogLevelDiagLogger)(null!==(s=n.logLevel)&&void 0!==s?s:a.DiagLogLevel.INFO,e);if(c&&!n.suppressOverrideMessage){let e=null!==(l=Error().stack)&&void 0!==l?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,i.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,i.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new r.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let r=n(660),o=n(172),a=n(930),i="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,o.registerGlobal)(i,e,a.DiagAPI.instance())}getMeterProvider(){return(0,o.getGlobal)(i)||r.NOOP_METER_PROVIDER}getMeter(e,t,n){return this.getMeterProvider().getMeter(e,t,n)}disable(){(0,o.unregisterGlobal)(i,a.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let r=n(172),o=n(874),a=n(194),i=n(277),s=n(369),l=n(930),c="propagation",u=new o.NoopTextMapPropagator;class d{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=i.getBaggage,this.getActiveBaggage=i.getActiveBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,r.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,n=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,n)}extract(e,t,n=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,n)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,r.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,r.getGlobal)(c)||u}}t.PropagationAPI=d},997:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let r=n(172),o=n(846),a=n(139),i=n(607),s=n(930),l="trace";class c{constructor(){this._proxyTracerProvider=new o.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getActiveSpan=i.getActiveSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,r.registerGlobal)(l,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,r.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,r.unregisterGlobal)(l,s.DiagAPI.instance()),this._proxyTracerProvider=new o.ProxyTracerProvider}}t.TraceAPI=c},277:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let r=n(491),o=(0,n(780).createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(o)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(r.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(o,t)},t.deleteBaggage=function(e){return e.deleteValue(o)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class n{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let r=new n(this._entries);return r._entries.set(e,t),r}removeEntry(e){let t=new n(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new n(this._entries);for(let n of e)t._entries.delete(n);return t}clear(){return new n}}t.BaggageImpl=n},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let r=n(930),o=n(993),a=n(830),i=r.DiagAPI.instance();t.createBaggage=function(e={}){return new o.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0;let r=n(491);t.context=r.ContextAPI.getInstance()},223:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let r=n(780);class o{active(){return r.ROOT_CONTEXT}with(e,t,n,...r){return t.call(n,...r)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=o},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class n{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,r)=>{let o=new n(t._currentContext);return o._currentContext.set(e,r),o},t.deleteValue=e=>{let r=new n(t._currentContext);return r._currentContext.delete(e),r}}}t.ROOT_CONTEXT=new n},506:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0;let r=n(930);t.diag=r.DiagAPI.instance()},56:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let r=n(172);class o{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return a("debug",this._namespace,e)}error(...e){return a("error",this._namespace,e)}info(...e){return a("info",this._namespace,e)}warn(...e){return a("warn",this._namespace,e)}verbose(...e){return a("verbose",this._namespace,e)}}function a(e,t,n){let o=(0,r.getGlobal)("diag");if(o)return n.unshift(t),o[e](...n)}t.DiagComponentLogger=o},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let n=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class r{constructor(){for(let e=0;e<n.length;e++)this[n[e].n]=function(e){return function(...t){if(console){let n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}(n[e].c)}}t.DiagConsoleLogger=r},912:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let r=n(957);t.createLogLevelDiagLogger=function(e,t){function n(n,r){let o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<r.DiagLogLevel.NONE?e=r.DiagLogLevel.NONE:e>r.DiagLogLevel.ALL&&(e=r.DiagLogLevel.ALL),t=t||{},{error:n("error",r.DiagLogLevel.ERROR),warn:n("warn",r.DiagLogLevel.WARN),info:n("info",r.DiagLogLevel.INFO),debug:n("debug",r.DiagLogLevel.DEBUG),verbose:n("verbose",r.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let r=n(200),o=n(521),a=n(130),i=o.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${i}`),l=r._globalThis;t.registerGlobal=function(e,t,n,r=!1){var a;let i=l[s]=null!==(a=l[s])&&void 0!==a?a:{version:o.VERSION};if(!r&&i[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return n.error(t.stack||t.message),!1}if(i.version!==o.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${i.version} for ${e} does not match previously registered API v${o.VERSION}`);return n.error(t.stack||t.message),!1}return i[e]=t,n.debug(`@opentelemetry/api: Registered a global for ${e} v${o.VERSION}.`),!0},t.getGlobal=function(e){var t,n;let r=null===(t=l[s])||void 0===t?void 0:t.version;if(r&&(0,a.isCompatible)(r))return null===(n=l[s])||void 0===n?void 0:n[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${o.VERSION}.`);let n=l[s];n&&delete n[e]}},130:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let r=n(521),o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),n=new Set,r=e.match(o);if(!r)return()=>!1;let a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=a.prerelease)return function(t){return t===e};function i(e){return n.add(e),!1}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;let r=e.match(o);if(!r)return i(e);let s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};return null!=s.prerelease||a.major!==s.major?i(e):0===a.major?a.minor===s.minor&&a.patch<=s.patch?(t.add(e),!0):i(e):a.minor<=s.minor?(t.add(e),!0):i(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(r.VERSION)},886:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0;let r=n(653);t.metrics=r.MetricsAPI.getInstance()},901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class n{constructor(){}createHistogram(e,n){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,n){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,n){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,n){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,n){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,n){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=n;class r{}t.NoopMetric=r;class o extends r{add(e,t){}}t.NoopCounterMetric=o;class a extends r{add(e,t){}}t.NoopUpDownCounterMetric=a;class i extends r{record(e,t){}}t.NoopHistogramMetric=i;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class l extends s{}t.NoopObservableCounterMetric=l;class c extends s{}t.NoopObservableGaugeMetric=c;class u extends s{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new n,t.NOOP_COUNTER_METRIC=new o,t.NOOP_HISTOGRAM_METRIC=new i,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let r=n(102);class o{getMeter(e,t,n){return r.NOOP_METER}}t.NoopMeterProvider=o,t.NOOP_METER_PROVIDER=new o},200:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(46),t)},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:global},46:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(651),t)},939:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0;let r=n(181);t.propagation=r.PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class n{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=n},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,n){null!=e&&(e[t]=n)}}},845:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0;let r=n(997);t.trace=r.TraceAPI.getInstance()},403:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let r=n(476);class o{constructor(e=r.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=o},614:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let r=n(491),o=n(607),a=n(403),i=n(139),s=r.ContextAPI.getInstance();class l{startSpan(e,t,n=s.active()){if(null==t?void 0:t.root)return new a.NonRecordingSpan;let r=n&&(0,o.getSpanContext)(n);return"object"==typeof r&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&(0,i.isSpanContextValid)(r)?new a.NonRecordingSpan(r):new a.NonRecordingSpan}startActiveSpan(e,t,n,r){let a,i,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(a=t,l=n):(a=t,i=n,l=r);let c=null!=i?i:s.active(),u=this.startSpan(e,a,c),d=(0,o.setSpan)(c,u);return s.with(d,l,void 0,u)}}t.NoopTracer=l},124:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let r=n(614);class o{getTracer(e,t,n){return new r.NoopTracer}}t.NoopTracerProvider=o},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let r=new(n(614)).NoopTracer;class o{constructor(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}startSpan(e,t,n){return this._getTracer().startSpan(e,t,n)}startActiveSpan(e,t,n,r){let o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):r}}t.ProxyTracer=o},846:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let r=n(125),o=new(n(124)).NoopTracerProvider;class a{getTracer(e,t,n){var o;return null!==(o=this.getDelegateTracer(e,t,n))&&void 0!==o?o:new r.ProxyTracer(this,e,t,n)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:o}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)}}t.ProxyTracerProvider=a},996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let r=n(780),o=n(403),a=n(491),i=(0,r.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(i)||void 0}function l(e,t){return e.setValue(i,t)}t.getSpan=s,t.getActiveSpan=function(){return s(a.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(i)},t.setSpanContext=function(e,t){return l(e,new o.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.spanContext()}},325:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let r=n(564);class o{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let n=t.trim(),o=n.indexOf("=");if(-1!==o){let a=n.slice(0,o),i=n.slice(o+1,t.length);(0,r.validateKey)(a)&&(0,r.validateValue)(i)&&e.set(a,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new o;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=o},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let n="[_0-9a-z-*/]",r=`[a-z]${n}{0,255}`,o=`[a-z0-9]${n}{0,240}@[a-z]${n}{0,13}`,a=RegExp(`^(?:${r}|${o})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return i.test(e)&&!s.test(e)}},98:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let r=n(325);t.createTraceState=function(e){return new r.TraceStateImpl(e)}},476:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let r=n(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.TraceFlags.NONE}},357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},139:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let r=n(476),o=n(403),a=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function s(e){return a.test(e)&&e!==r.INVALID_TRACEID}function l(e){return i.test(e)&&e!==r.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=l,t.isSpanContextValid=function(e){return s(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new o.NonRecordingSpan(e)}},847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}},i=!0;try{t[e].call(a.exports,a,a.exports,r),i=!1}finally{i&&delete n[e]}return a.exports}r.ab=__dirname+"/";var o={};(()=>{Object.defineProperty(o,"__esModule",{value:!0}),o.trace=o.propagation=o.metrics=o.diag=o.context=o.INVALID_SPAN_CONTEXT=o.INVALID_TRACEID=o.INVALID_SPANID=o.isValidSpanId=o.isValidTraceId=o.isSpanContextValid=o.createTraceState=o.TraceFlags=o.SpanStatusCode=o.SpanKind=o.SamplingDecision=o.ProxyTracerProvider=o.ProxyTracer=o.defaultTextMapSetter=o.defaultTextMapGetter=o.ValueType=o.createNoopMeter=o.DiagLogLevel=o.DiagConsoleLogger=o.ROOT_CONTEXT=o.createContextKey=o.baggageEntryMetadataFromString=void 0;var e=r(369);Object.defineProperty(o,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=r(780);Object.defineProperty(o,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(o,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var n=r(972);Object.defineProperty(o,"DiagConsoleLogger",{enumerable:!0,get:function(){return n.DiagConsoleLogger}});var a=r(957);Object.defineProperty(o,"DiagLogLevel",{enumerable:!0,get:function(){return a.DiagLogLevel}});var i=r(102);Object.defineProperty(o,"createNoopMeter",{enumerable:!0,get:function(){return i.createNoopMeter}});var s=r(901);Object.defineProperty(o,"ValueType",{enumerable:!0,get:function(){return s.ValueType}});var l=r(194);Object.defineProperty(o,"defaultTextMapGetter",{enumerable:!0,get:function(){return l.defaultTextMapGetter}}),Object.defineProperty(o,"defaultTextMapSetter",{enumerable:!0,get:function(){return l.defaultTextMapSetter}});var c=r(125);Object.defineProperty(o,"ProxyTracer",{enumerable:!0,get:function(){return c.ProxyTracer}});var u=r(846);Object.defineProperty(o,"ProxyTracerProvider",{enumerable:!0,get:function(){return u.ProxyTracerProvider}});var d=r(996);Object.defineProperty(o,"SamplingDecision",{enumerable:!0,get:function(){return d.SamplingDecision}});var f=r(357);Object.defineProperty(o,"SpanKind",{enumerable:!0,get:function(){return f.SpanKind}});var p=r(847);Object.defineProperty(o,"SpanStatusCode",{enumerable:!0,get:function(){return p.SpanStatusCode}});var g=r(475);Object.defineProperty(o,"TraceFlags",{enumerable:!0,get:function(){return g.TraceFlags}});var h=r(98);Object.defineProperty(o,"createTraceState",{enumerable:!0,get:function(){return h.createTraceState}});var v=r(139);Object.defineProperty(o,"isSpanContextValid",{enumerable:!0,get:function(){return v.isSpanContextValid}}),Object.defineProperty(o,"isValidTraceId",{enumerable:!0,get:function(){return v.isValidTraceId}}),Object.defineProperty(o,"isValidSpanId",{enumerable:!0,get:function(){return v.isValidSpanId}});var m=r(476);Object.defineProperty(o,"INVALID_SPANID",{enumerable:!0,get:function(){return m.INVALID_SPANID}}),Object.defineProperty(o,"INVALID_TRACEID",{enumerable:!0,get:function(){return m.INVALID_TRACEID}}),Object.defineProperty(o,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return m.INVALID_SPAN_CONTEXT}});let y=r(67);Object.defineProperty(o,"context",{enumerable:!0,get:function(){return y.context}});let b=r(506);Object.defineProperty(o,"diag",{enumerable:!0,get:function(){return b.diag}});let _=r(886);Object.defineProperty(o,"metrics",{enumerable:!0,get:function(){return _.metrics}});let S=r(939);Object.defineProperty(o,"propagation",{enumerable:!0,get:function(){return S.propagation}});let O=r(845);Object.defineProperty(o,"trace",{enumerable:!0,get:function(){return O.trace}}),o.default={context:y.context,diag:b.diag,metrics:_.metrics,propagation:S.propagation,trace:O.trace}})(),e.exports=o})()},8739:(e,t,n)=>{"use strict";var r=n(2168),o=n(5028),a={stream:!0},i=new Map;function s(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function l(){}var c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,u=Symbol.for("react.element"),d=Symbol.for("react.provider"),f=Symbol.for("react.server_context"),p=Symbol.for("react.lazy"),g=Symbol.for("react.default_value"),h=Symbol.iterator,v=Array.isArray,m=Object.getPrototypeOf,y=Object.prototype,b=new WeakMap;function _(e,t,n,r){var o=1,a=0,i=null;e=JSON.stringify(e,function e(s,l){if(null===l)return null;if("object"==typeof l){if("function"==typeof l.then){null===i&&(i=new FormData),a++;var c,u,d=o++;return l.then(function(r){r=JSON.stringify(r,e);var o=i;o.append(t+d,r),0==--a&&n(o)},function(e){r(e)}),"$@"+d.toString(16)}if(v(l))return l;if(l instanceof FormData){null===i&&(i=new FormData);var f=i,p=t+(s=o++)+"_";return l.forEach(function(e,t){f.append(p+t,e)}),"$K"+s.toString(16)}if(l instanceof Map)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),s=o++,i.append(t+s,l),"$Q"+s.toString(16);if(l instanceof Set)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),s=o++,i.append(t+s,l),"$W"+s.toString(16);if(null===(u=l)||"object"!=typeof u?null:"function"==typeof(u=h&&u[h]||u["@@iterator"])?u:null)return Array.from(l);if((s=m(l))!==y&&(null===s||null!==m(s)))throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return l}if("string"==typeof l)return"Z"===l[l.length-1]&&this[s]instanceof Date?"$D"+l:l="$"===l[0]?"$"+l:l;if("boolean"==typeof l)return l;if("number"==typeof l)return Number.isFinite(c=l)?0===c&&-1/0==1/c?"$-0":c:1/0===c?"$Infinity":-1/0===c?"$-Infinity":"$NaN";if(void 0===l)return"$undefined";if("function"==typeof l){if(void 0!==(l=b.get(l)))return l=JSON.stringify(l,e),null===i&&(i=new FormData),s=o++,i.set(t+s,l),"$F"+s.toString(16);throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof l){if(Symbol.for(s=l.description)!==l)throw Error("Only global symbols received from Symbol.for(...) can be passed to Server Functions. The symbol Symbol.for("+l.description+") cannot be found among global symbols.");return"$S"+s}if("bigint"==typeof l)return"$n"+l.toString(10);throw Error("Type "+typeof l+" is not supported as an argument to a Server Function.")}),null===i?n(e):(i.set(t+"0",e),0===a&&n(i))}var S=new WeakMap;function O(e){var t=b.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var n=null;if(null!==t.bound){if((n=S.get(t))||(r=t,i=new Promise(function(e,t){o=e,a=t}),_(r,"",function(e){if("string"==typeof e){var t=new FormData;t.append("0",e),e=t}i.status="fulfilled",i.value=e,o(e)},function(e){i.status="rejected",i.reason=e,a(e)}),n=i,S.set(t,n)),"rejected"===n.status)throw n.reason;if("fulfilled"!==n.status)throw n;t=n.value;var r,o,a,i,s=new FormData;t.forEach(function(t,n){s.append("$ACTION_"+e+":"+n,t)}),n=s,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:n}}function E(e,t){var n=b.get(this);if(!n)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(n.id!==e)return!1;var r=n.bound;if(null===r)return 0===t;switch(r.status){case"fulfilled":return r.value.length===t;case"pending":throw r;case"rejected":throw r.reason;default:throw"string"!=typeof r.status&&(r.status="pending",r.then(function(e){r.status="fulfilled",r.value=e},function(e){r.status="rejected",r.reason=e})),r}}function T(e,t){Object.defineProperties(e,{$$FORM_ACTION:{value:O},$$IS_SIGNATURE_EQUAL:{value:E},bind:{value:w}}),b.set(e,t)}var N=Function.prototype.bind,C=Array.prototype.slice;function w(){var e=N.apply(this,arguments),t=b.get(this);if(t){var n=C.call(arguments,1),r=null;r=null!==t.bound?Promise.resolve(t.bound).then(function(e){return e.concat(n)}):Promise.resolve(n),T(e,{id:t.id,bound:r})}return e}var x=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ContextRegistry;function R(e,t,n,r){this.status=e,this.value=t,this.reason=n,this._response=r}function P(e){switch(e.status){case"resolved_model":k(e);break;case"resolved_module":B(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":throw e;default:throw e.reason}}function I(e,t){for(var n=0;n<e.length;n++)(0,e[n])(t)}function M(e,t,n){switch(e.status){case"fulfilled":I(t,e.value);break;case"pending":case"blocked":case"cyclic":e.value=t,e.reason=n;break;case"rejected":n&&I(n,e.reason)}}function A(e,t){if("pending"===e.status||"blocked"===e.status){var n=e.reason;e.status="rejected",e.reason=t,null!==n&&I(n,t)}}function D(e,t){if("pending"===e.status||"blocked"===e.status){var n=e.value,r=e.reason;e.status="resolved_module",e.value=t,null!==n&&(B(e),M(e,n,r))}}R.prototype=Object.create(Promise.prototype),R.prototype.then=function(e,t){switch(this.status){case"resolved_model":k(this);break;case"resolved_module":B(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":case"cyclic":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var j=null,L=null;function k(e){var t=j,n=L;j=e,L=null;var r=e.value;e.status="cyclic",e.value=null,e.reason=null;try{var o=JSON.parse(r,e._response._fromJSON);if(null!==L&&0<L.deps)L.value=o,e.status="blocked",e.value=null,e.reason=null;else{var a=e.value;e.status="fulfilled",e.value=o,null!==a&&I(a,o)}}catch(t){e.status="rejected",e.reason=t}finally{j=t,L=n}}function B(e){try{var t=e.value,n=globalThis.__next_require__(t[0]);if(4===t.length&&"function"==typeof n.then){if("fulfilled"===n.status)n=n.value;else throw n.reason}var r="*"===t[2]?n:""===t[2]?n.__esModule?n.default:n:n[t[2]];e.status="fulfilled",e.value=r}catch(t){e.status="rejected",e.reason=t}}function U(e,t){e._chunks.forEach(function(e){"pending"===e.status&&A(e,t)})}function F(e,t){var n=e._chunks,r=n.get(t);return r||(r=new R("pending",null,null,e),n.set(t,r)),r}function G(e,t){if("resolved_model"===(e=F(e,t)).status&&k(e),"fulfilled"===e.status)return e.value;throw e.reason}function V(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function $(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function H(e){var t,n=e.ssrManifest.moduleMap;return(n={_bundlerConfig:n,_moduleLoading:e.ssrManifest.moduleLoading,_callServer:void 0!==$?$:V,_nonce:e="string"==typeof e.nonce?e.nonce:void 0,_chunks:new Map,_stringDecoder:new TextDecoder,_fromJSON:null,_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]})._fromJSON=(t=n,function(e,n){return"string"==typeof n?function(e,t,n,r){if("$"===r[0]){if("$"===r)return u;switch(r[1]){case"$":return r.slice(1);case"L":return{$$typeof:p,_payload:e=F(e,t=parseInt(r.slice(2),16)),_init:P};case"@":return F(e,t=parseInt(r.slice(2),16));case"S":return Symbol.for(r.slice(2));case"P":return x[e=r.slice(2)]||((t={$$typeof:f,_currentValue:g,_currentValue2:g,_defaultValue:g,_threadCount:0,Provider:null,Consumer:null,_globalName:e}).Provider={$$typeof:d,_context:t},x[e]=t),x[e].Provider;case"F":return t=G(e,t=parseInt(r.slice(2),16)),function(e,t){function n(){var e=Array.prototype.slice.call(arguments),n=t.bound;return n?"fulfilled"===n.status?r(t.id,n.value.concat(e)):Promise.resolve(n).then(function(n){return r(t.id,n.concat(e))}):r(t.id,e)}var r=e._callServer;return T(n,t),n}(e,t);case"Q":return e=G(e,t=parseInt(r.slice(2),16)),new Map(e);case"W":return e=G(e,t=parseInt(r.slice(2),16)),new Set(e);case"I":return 1/0;case"-":return"$-0"===r?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(r.slice(2)));case"n":return BigInt(r.slice(2));default:switch((e=F(e,r=parseInt(r.slice(1),16))).status){case"resolved_model":k(e);break;case"resolved_module":B(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":var o;return r=j,e.then(function(e,t,n,r){if(L){var o=L;r||o.deps++}else o=L={deps:r?0:1,value:null};return function(r){t[n]=r,o.deps--,0===o.deps&&"blocked"===e.status&&(r=e.value,e.status="fulfilled",e.value=o.value,null!==r&&I(r,o.value))}}(r,t,n,"cyclic"===e.status),(o=r,function(e){return A(o,e)})),null;default:throw e.reason}}}return r}(t,this,e,n):"object"==typeof n&&null!==n?e=n[0]===u?{$$typeof:u,type:n[1],key:n[2],ref:null,props:n[3],_owner:null}:n:n}),n}function q(e,t){function r(t){U(e,t)}var o=t.getReader();o.read().then(function t(u){var d=u.value;if(u.done)U(e,Error("Connection closed."));else{var f=0,p=e._rowState,g=e._rowID,h=e._rowTag,v=e._rowLength;u=e._buffer;for(var m=d.length;f<m;){var y=-1;switch(p){case 0:58===(y=d[f++])?p=1:g=g<<4|(96<y?y-87:y-48);continue;case 1:84===(p=d[f])?(h=p,p=2,f++):64<p&&91>p?(h=p,p=3,f++):(h=0,p=3);continue;case 2:44===(y=d[f++])?p=4:v=v<<4|(96<y?y-87:y-48);continue;case 3:y=d.indexOf(10,f);break;case 4:(y=f+v)>d.length&&(y=-1)}var b=d.byteOffset+f;if(-1<y){f=new Uint8Array(d.buffer,b,y-f),v=e,b=h;var _=v._stringDecoder;h="";for(var S=0;S<u.length;S++)h+=_.decode(u[S],a);switch(h+=_.decode(f),b){case 73:!function(e,t,r){var o=e._chunks,a=o.get(t);r=JSON.parse(r,e._fromJSON);var u=function(e,t){if(e){var n=e[t[0]];if(e=n[t[2]])n=e.name;else{if(!(e=n["*"]))throw Error('Could not find the module "'+t[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');n=t[2]}return 4===t.length?[e.id,e.chunks,n,1]:[e.id,e.chunks,n]}return t}(e._bundlerConfig,r);if(function(e,t,n){if(null!==e)for(var r=1;r<t.length;r+=2){var o=c.current;if(o){var a=o.preinitScript,i=e.prefix+t[r],s=e.crossOrigin;s="string"==typeof s?"use-credentials"===s?s:"":void 0,a.call(o,i,{crossOrigin:s,nonce:n})}}}(e._moduleLoading,r[1],e._nonce),r=function(e){for(var t=e[1],r=[],o=0;o<t.length;){var a=t[o++];t[o++];var c=i.get(a);if(void 0===c){c=n.e(a),r.push(c);var u=i.set.bind(i,a,null);c.then(u,l),i.set(a,c)}else null!==c&&r.push(c)}return 4===e.length?0===r.length?s(e[0]):Promise.all(r).then(function(){return s(e[0])}):0<r.length?Promise.all(r):null}(u)){if(a){var d=a;d.status="blocked"}else d=new R("blocked",null,null,e),o.set(t,d);r.then(function(){return D(d,u)},function(e){return A(d,e)})}else a?D(a,u):o.set(t,new R("resolved_module",u,null,e))}(v,g,h);break;case 72:if(g=h[0],v=JSON.parse(h=h.slice(1),v._fromJSON),h=c.current)switch(g){case"D":h.prefetchDNS(v);break;case"C":"string"==typeof v?h.preconnect(v):h.preconnect(v[0],v[1]);break;case"L":g=v[0],f=v[1],3===v.length?h.preload(g,f,v[2]):h.preload(g,f);break;case"m":"string"==typeof v?h.preloadModule(v):h.preloadModule(v[0],v[1]);break;case"S":"string"==typeof v?h.preinitStyle(v):h.preinitStyle(v[0],0===v[1]?void 0:v[1],3===v.length?v[2]:void 0);break;case"X":"string"==typeof v?h.preinitScript(v):h.preinitScript(v[0],v[1]);break;case"M":"string"==typeof v?h.preinitModuleScript(v):h.preinitModuleScript(v[0],v[1])}break;case 69:f=(h=JSON.parse(h)).digest,(h=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.")).stack="Error: "+h.message,h.digest=f,(b=(f=v._chunks).get(g))?A(b,h):f.set(g,new R("rejected",null,h,v));break;case 84:v._chunks.set(g,new R("fulfilled",h,null,v));break;default:(b=(f=v._chunks).get(g))?(v=b,g=h,"pending"===v.status&&(h=v.value,f=v.reason,v.status="resolved_model",v.value=g,null!==h&&(k(v),M(v,h,f)))):f.set(g,new R("resolved_model",h,null,v))}f=y,3===p&&f++,v=g=h=p=0,u.length=0}else{d=new Uint8Array(d.buffer,b,d.byteLength-f),u.push(d),v-=d.byteLength;break}}return e._rowState=p,e._rowID=g,e._rowTag=h,e._rowLength=v,o.read().then(t).catch(r)}}).catch(r)}t.createFromFetch=function(e,t){var n=H(t);return e.then(function(e){q(n,e.body)},function(e){U(n,e)}),F(n,0)},t.createFromReadableStream=function(e,t){return q(t=H(t),e),F(t,0)},t.createServerReference=function(e){return function(e,t){function n(){var n=Array.prototype.slice.call(arguments);return t(e,n)}return T(n,{id:e,bound:null}),n}(e,$)},t.encodeReply=function(e){return new Promise(function(t,n){_(e,"",t,n)})}},1002:(e,t,n)=>{"use strict";e.exports=n(8739)},2511:()=>{},2595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return n}});class n{constructor(){let e,t;this.promise=new Promise((n,r)=>{e=n,t=r}),this.resolve=e,this.reject=t}}},2899:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{scheduleOnNextTick:function(){return n},scheduleImmediate:function(){return r}});let n=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},r=e=>{setImmediate(e)}},9756:(e,t)=>{"use strict";let n,r;function o(e){let t=new Uint8Array(e),n=t.byteLength;if(n<65535)return String.fromCharCode.apply(null,t);let r="";for(let e=0;e<n;e++)r+=String.fromCharCode(t[e]);return r}function a(e){let t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}function i(e,t,n){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,n)}function s(e,t,n){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,n)}async function l(e){if(e&&void 0!==r)return r;let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),a=btoa(o(await crypto.subtle.exportKey("raw",t)));return n=t,e&&(r=a),a}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{arrayBufferToString:function(){return o},stringToUint8Array:function(){return a},encrypt:function(){return i},decrypt:function(){return s},generateRandomActionKeyRaw:function(){return l},setReferenceManifestsSingleton:function(){return u},getServerModuleMap:function(){return d},getClientReferenceManifestSingleton:function(){return f},getActionEncryptionKey:function(){return p}});let c=Symbol.for("next.server.action-manifests");function u({clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:n}){globalThis[c]={clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:n}}function d(){let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.serverModuleMap}function f(){let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.clientReferenceManifest}async function p(){if(n)return n;let e=globalThis[c];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Error("Missing encryption key for Server Actions");return n=await crypto.subtle.importKey("raw",a(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},5811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{encryptActionBoundArgs:function(){return d},decryptActionBoundArgs:function(){return f}}),n(2511);let r=n(9489),o=n(1002),a=n(2365),i=n(9756),s=new TextEncoder,l=new TextDecoder;async function c(e,t){let n=await (0,i.getActionEncryptionKey)();if(void 0===n)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let r=atob(t),o=r.slice(0,16),a=r.slice(16);if(void 0===a)throw Error("Invalid Server Action payload.");let s=l.decode(await (0,i.decrypt)(n,(0,i.stringToUint8Array)(o),(0,i.stringToUint8Array)(a)));if(!s.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return s.slice(e.length)}async function u(e,t){let n=await (0,i.getActionEncryptionKey)();if(void 0===n)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let r=new Uint8Array(16);crypto.getRandomValues(r);let o=(0,i.arrayBufferToString)(r.buffer),a=await (0,i.encrypt)(n,r,s.encode(e+t));return btoa(o+(0,i.arrayBufferToString)(a))}async function d(e,t){let n=(0,i.getClientReferenceManifestSingleton)(),o=await (0,a.streamToString)((0,r.renderToReadableStream)(t,n.clientModules));return await u(e,o)}async function f(e,t){let n=await c(e,await t),a=await (0,o.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(new TextEncoder().encode(n)),e.close()}}),{ssrManifest:{moduleLoading:{},moduleMap:{}}}),s=(0,i.getServerModuleMap)();return await (0,r.decodeReply)(await (0,o.encodeReply)(a),s)}},2168:(e,t,n)=>{"use strict";e.exports=n(482).vendored["react-rsc"].ReactDOM},9489:(e,t,n)=>{"use strict";e.exports=n(482).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},5028:(e,t,n)=>{"use strict";e.exports=n(482).vendored["react-rsc"].React},9102:(e,t)=>{"use strict";var n,r,o,a,i,s,l,c,u,d,f;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{NextVanillaSpanAllowlist:function(){return p},BaseServerSpan:function(){return n},LoadComponentsSpan:function(){return r},NextServerSpan:function(){return o},NextNodeServerSpan:function(){return a},StartServerSpan:function(){return i},RenderSpan:function(){return s},RouterSpan:function(){return c},AppRenderSpan:function(){return l},NodeSpan:function(){return u},AppRouteRouteHandlersSpan:function(){return d},ResolveMetadataSpan:function(){return f}}),function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(n||(n={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(r||(r={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(o||(o={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(a||(a={})),(i||(i={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(s||(s={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(l||(l={})),(c||(c={})).executeRoute="Router.executeRoute",(u||(u={})).runHandler="Node.runHandler",(d||(d={})).runHandler="AppRouteRouteHandlers.runHandler",function(e){e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport"}(f||(f={}));let p=["BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule"]},6742:(e,t,n)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getTracer:function(){return y},SpanStatusCode:function(){return l},SpanKind:function(){return c}});let o=n(9102);try{r=n(8226)}catch(e){r=n(8226)}let{context:a,propagation:i,trace:s,SpanStatusCode:l,SpanKind:c,ROOT_CONTEXT:u}=r,d=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,f=(e,t)=>{(null==t?void 0:t.bubble)===!0?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:l.ERROR,message:null==t?void 0:t.message})),e.end()},p=new Map,g=r.createContextKey("next.rootSpanId"),h=0,v=()=>h++;class m{getTracerInstance(){return s.getTracer("next.js","0.0.1")}getContext(){return a}getActiveScopeSpan(){return s.getSpan(null==a?void 0:a.active())}withPropagatedContext(e,t,n){let r=a.active();if(s.getSpanContext(r))return t();let o=i.extract(r,e,n);return a.with(o,t)}trace(...e){var t;let[n,r,i]=e,{fn:l,options:c}="function"==typeof r?{fn:r,options:{}}:{fn:i,options:{...r}};if(!o.NextVanillaSpanAllowlist.includes(n)&&"1"!==process.env.NEXT_OTEL_VERBOSE||c.hideSpan)return l();let h=c.spanName??n,m=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan()),y=!1;m?(null==(t=s.getSpanContext(m))?void 0:t.isRemote)&&(y=!0):(m=u,y=!0);let b=v();return c.attributes={"next.span_name":h,"next.span_type":n,...c.attributes},a.with(m.setValue(g,b),()=>this.getTracerInstance().startActiveSpan(h,c,e=>{let t=()=>{p.delete(b)};y&&p.set(b,new Map(Object.entries(c.attributes??{})));try{if(l.length>1)return l(e,t=>f(e,t));let n=l(e);if(d(n))return n.then(t=>(e.end(),t)).catch(t=>{throw f(e,t),t}).finally(t);return e.end(),t(),n}catch(n){throw f(e,n),t(),n}}))}wrap(...e){let t=this,[n,r,i]=3===e.length?e:[e[0],{},e[1]];return o.NextVanillaSpanAllowlist.includes(n)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=r;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let o=arguments.length-1,s=arguments[o];if("function"!=typeof s)return t.trace(n,e,()=>i.apply(this,arguments));{let r=t.getContext().bind(a.active(),s);return t.trace(n,e,(e,t)=>(arguments[o]=function(e){return null==t||t(e),r.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,n]=e,r=this.getSpanContext((null==n?void 0:n.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,n,r)}getSpanContext(e){return e?s.setSpan(a.active(),e):void 0}getRootSpanAttributes(){let e=a.active().getValue(g);return p.get(e)}}let y=(()=>{let e=new m;return()=>e})()},7336:(e,t)=>{"use strict";function n(e=new TextDecoder){return new TransformStream({transform:(t,n)=>n.enqueue(e.decode(t,{stream:!0})),flush:t=>t.enqueue(e.decode())})}function r(e=new TextEncoder){return new TransformStream({transform:(t,n)=>n.enqueue(e.encode(t))})}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{createDecodeTransformStream:function(){return n},createEncodeTransformStream:function(){return r}})},2365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{cloneTransformStream:function(){return l},chainStreams:function(){return c},streamFromString:function(){return u},streamToString:function(){return d},createBufferedTransformStream:function(){return f},renderToInitialFizzStream:function(){return g},createRootLayoutValidatorStream:function(){return m},continueFizzStream:function(){return b},continuePostponedFizzStream:function(){return _}});let r=n(6742),o=n(9102),a=n(7336),i=n(2595),s=n(2899);function l(e){let t=e.readable.getReader();return new TransformStream({async start(e){for(;;){let{done:n,value:r}=await t.read();if(n)break;e.enqueue(r)}},transform(){}})}function c(...e){let{readable:t,writable:n}=new TransformStream,r=Promise.resolve();for(let t=0;t<e.length;++t)r=r.then(()=>e[t].pipeTo(n,{preventClose:t+1<e.length}));return r.catch(()=>{}),t}function u(e){let t=new TextEncoder;return new ReadableStream({start(n){n.enqueue(t.encode(e)),n.close()}})}async function d(e){let t="";return await e.pipeThrough((0,a.createDecodeTransformStream)()).pipeTo(new WritableStream({write(e){t+=e}})),t}function f(){let e,t=new Uint8Array,n=n=>{if(e)return;let r=new i.DetachedPromise;e=r,(0,s.scheduleImmediate)(()=>{try{n.enqueue(t),t=new Uint8Array}catch{}finally{e=void 0,r.resolve()}})};return new TransformStream({transform(e,r){let o=new Uint8Array(t.length+e.byteLength);o.set(t),o.set(e,t.length),t=o,n(r)},flush(){if(e)return e.promise}})}function p(e){let t=new TextEncoder;return new TransformStream({transform:async(n,r)=>{let o=await e();o&&r.enqueue(t.encode(o)),r.enqueue(n)}})}function g({ReactDOMServer:e,element:t,streamOptions:n}){return(0,r.getTracer)().trace(o.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,n))}function h(e){let t=!1,n=null,r=t=>{let r=e.getReader(),o=new i.DetachedPromise;n=o,(0,s.scheduleImmediate)(async()=>{try{for(;;){let{done:e,value:n}=await r.read();if(e)return;t.enqueue(n)}}catch(e){t.error(e)}finally{o.resolve()}})};return new TransformStream({transform(e,n){n.enqueue(e),t||(t=!0,r(n))},flush(){if(n&&t)return n.promise}})}function v(e){let t=!1,n=new TextEncoder,r=new TextDecoder;return new TransformStream({transform(o,a){if(t)return a.enqueue(o);let i=r.decode(o),s=i.indexOf(e);if(s>-1){if(t=!0,i.length===e.length)return;let r=i.slice(0,s);if(o=n.encode(r),a.enqueue(o),i.length>e.length+s){let t=i.slice(s+e.length);o=n.encode(t),a.enqueue(o)}}else a.enqueue(o)},flush(t){t.enqueue(n.encode(e))}})}function m(e="",t){let n=!1,r=!1,o=new TextEncoder,a=new TextDecoder,i="";return new TransformStream({async transform(e,t){(!n||!r)&&(i+=a.decode(e,{stream:!0}),!n&&i.includes("<html")&&(n=!0),!r&&i.includes("<body")&&(r=!0)),t.enqueue(e)},flush(s){(!n||!r)&&(i+=a.decode(),!n&&i.includes("<html")&&(n=!0),!r&&i.includes("<body")&&(r=!0));let l=[];n||l.push("html"),r||l.push("body"),l.length>0&&s.enqueue(o.encode(`<script>self.__next_root_layout_missing_tags_error=${JSON.stringify({missingTags:l,assetPrefix:e??"",tree:t()})}</script>`))}})}function y(e,t){let n=e;for(let e of t)e&&(n=n.pipeThrough(e));return n}async function b(e,{suffix:t,inlinedDataStream:n,isStaticGeneration:r,getServerInsertedHTML:o,serverInsertedHTMLToHead:a,validateRootLayout:l}){let c="</body></html>",u=t?t.split(c,1)[0]:null;return r&&"allReady"in e&&await e.allReady,y(e,[f(),o&&!a?p(o):null,null!=u&&u.length>0?function(e){let t,n=!1,r=new TextEncoder,o=n=>{let o=new i.DetachedPromise;t=o,(0,s.scheduleImmediate)(()=>{try{n.enqueue(r.encode(e))}catch{}finally{t=void 0,o.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),n||(n=!0,o(t))},flush(o){if(t)return t.promise;n||o.enqueue(r.encode(e))}})}(u):null,n?h(n):null,v(c),o&&a?function(e){let t=!1,n=!1,r=new TextEncoder,o=new TextDecoder;return new TransformStream({async transform(a,i){if(n){i.enqueue(a);return}let l=await e();if(t)i.enqueue(r.encode(l)),i.enqueue(a),n=!0;else{let e=o.decode(a),s=e.indexOf("</head>");if(-1!==s){let o=e.slice(0,s)+l+e.slice(s);i.enqueue(r.encode(o)),n=!0,t=!0}}t?(0,s.scheduleImmediate)(()=>{n=!1}):i.enqueue(a)},async flush(t){let n=await e();n&&t.enqueue(r.encode(n))}})}(o):null,l?m(l.assetPrefix,l.getTree):null])}async function _(e,{inlinedDataStream:t,isStaticGeneration:n,getServerInsertedHTML:r,serverInsertedHTMLToHead:o}){return n&&"allReady"in e&&await e.allReady,y(e,[f(),r&&!o?p(r):null,t?h(t):null,v("</body></html>")])}},7272:()=>{},8190:(e,t,n)=>{"use strict";var r,o,a,i,s,l,c,u,d,f,p,g;n.d(t,{GoogleGenerativeAI:()=>Y}),function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(r||(r={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(o||(o={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(a||(a={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h=["user","model","function","system"];(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(i||(i={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(s||(s={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(l||(l={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(c||(c={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"}(u||(u={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(d||(d={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(f||(f={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(p||(p={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class m extends v{constructor(e,t){super(e),this.response=t}}class y extends v{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class b extends v{}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(g||(g={}));class _{constructor(e,t,n,r,o){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=o}toString(){var e,t;let n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",r=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",o=`${r}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}async function S(e){var t;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.21.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(e){throw new b(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${e.message}`)}for(let[e,t]of r.entries()){if("x-goog-api-key"===e)throw new b(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new b(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function O(e,t,n,r,o,a){let i=new _(e,t,n,r,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}(a)),{method:"POST",headers:await S(i),body:o})}}async function E(e,t,n,r,o,a={},i=fetch){let{url:s,fetchOptions:l}=await O(e,t,n,r,o,a);return T(s,l,i)}async function T(e,t,n=fetch){let r;try{r=await n(e,t)}catch(t){(function(e,t){let n=e;throw e instanceof y||e instanceof b||((n=new v(`Error fetching from ${t.toString()}: ${e.message}`)).stack=e.stack),n})(t,e)}return r.ok||await N(r,e),r}async function N(e,t){let n,r="";try{let t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(e){}throw new y(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),R(e.candidates[0]))throw new m(`${P(e)}`,e);return function(e){var t,n,r,o;let a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(let t of null===(o=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===o?void 0:o.parts)t.text&&a.push(t.text),t.executableCode&&a.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&a.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}(e)}if(e.promptFeedback)throw new m(`Text not available. ${P(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),R(e.candidates[0]))throw new m(`${P(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),w(e)[0]}if(e.promptFeedback)throw new m(`Function call not available. ${P(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),R(e.candidates[0]))throw new m(`${P(e)}`,e);return w(e)}if(e.promptFeedback)throw new m(`Function call not available. ${P(e)}`,e)},e}function w(e){var t,n,r,o;let a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(let t of null===(o=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===o?void 0:o.parts)t.functionCall&&a.push(t.functionCall);return a.length>0?a:void 0}let x=[u.RECITATION,u.SAFETY,u.LANGUAGE];function R(e){return!!e.finishReason&&x.includes(e.finishReason)}function P(e){var t,n,r;let o="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)o+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(o+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null===(r=e.candidates)||void 0===r?void 0:r[0]){let t=e.candidates[0];R(t)&&(o+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(o+=`: ${t.finishMessage}`))}return o}function I(e){return this instanceof I?(this.v=e,this):new I(e)}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function A(e){let t=[],n=e.getReader();for(;;){let{done:e,value:r}=await n.read();if(e)return C(function(e){let t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates)for(let e of t.candidates){let t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});let r={};for(let o of e.content.parts)o.text&&(r.text=o.text),o.functionCall&&(r.functionCall=o.functionCall),o.executableCode&&(r.executableCode=o.executableCode),o.codeExecutionResult&&(r.codeExecutionResult=o.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}t.usageMetadata&&(n.usageMetadata=t.usageMetadata)}return n}(t));t.push(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D(e,t,n,r){return function(e){let[t,n]=(function(e){let t=e.getReader();return new ReadableStream({start(e){let n="";return function r(){return t.read().then(({value:t,done:o})=>{let a;if(o){if(n.trim()){e.error(new v("Failed to parse stream"));return}e.close();return}let i=(n+=t).match(M);for(;i;){try{a=JSON.parse(i[1])}catch(t){e.error(new v(`Error parsing JSON response: "${i[1]}"`));return}e.enqueue(a),i=(n=n.substring(i[0].length)).match(M)}return r()})}()}})})(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{var n;(n=o[e](t)).value instanceof I?Promise.resolve(n.value.v).then(l,c):u(a[0][2],n)}catch(e){u(a[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:n}=yield I(t.read());if(n)break;yield yield I(C(e))}})}(t),response:A(n)}}(await E(t,g.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function j(e,t,n,r){let o=await E(t,g.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:C(await o.json())}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function k(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let n of e)"string"==typeof n?t.push({text:n}):t.push(n);return function(e){let t={role:"user",parts:[]},n={role:"function",parts:[]},r=!1,o=!1;for(let a of e)"functionResponse"in a?(n.parts.push(a),o=!0):(t.parts.push(a),r=!0);if(r&&o)throw new v("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new v("No content is provided for sending chat message.");return r?t:n}(t)}function B(e){let t;return t=e.contents?e:{contents:[k(e)]},e.systemInstruction&&(t.systemInstruction=L(e.systemInstruction)),t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],F={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]},G="SILENT_ERROR";class V{constructor(e,t,n,r={}){this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(function(e){let t=!1;for(let n of e){let{role:e,parts:r}=n;if(!t&&"user"!==e)throw new v(`First content should be with role 'user', got ${e}`);if(!h.includes(e))throw new v(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(h)}`);if(!Array.isArray(r))throw new v("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new v("Each Content should have at least one part");let o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of r)for(let t of U)t in e&&(o[t]+=1);let a=F[e];for(let t of U)if(!a.includes(t)&&o[t]>0)throw new v(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,r,o,a,i,s;let l;await this._sendPromise;let c=k(e),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(o=this.params)||void 0===o?void 0:o.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>j(this._apiKey,this.model,u,d)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(c);let n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{let t=P(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var n,r,o,a,i,s;await this._sendPromise;let l=k(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(o=this.params)||void 0===o?void 0:o.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=D(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw Error(G)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=P(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==G&&console.error(e)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $(e,t,n,r){return(await E(t,g.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(e,t,n,r){return(await E(t,g.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}async function q(e,t,n,r){let o=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await E(t,g.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=L(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;let r=B(e),o=Object.assign(Object.assign({},this._requestOptions),t);return j(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),o)}async generateContentStream(e,t={}){var n;let r=B(e),o=Object.assign(Object.assign({},this._requestOptions),t);return D(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),o)}startChat(e){var t;return new V(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let n=function(e,t){var n;let r={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(n=null==t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]},o=null!=e.generateContentRequest;if(e.contents){if(o)throw new b("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{let t=k(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return $(this.apiKey,this.model,n,r)}async embedContent(e,t={}){let n="string"==typeof e||Array.isArray(e)?{content:k(e)}:e,r=Object.assign(Object.assign({},this._requestOptions),t);return H(this.apiKey,this.model,n,r)}async batchEmbedContents(e,t={}){let n=Object.assign(Object.assign({},this._requestOptions),t);return q(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new v("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new K(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new b("Cached content must contain a `name` field.");if(!e.model)throw new b("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==t?void 0:t[n])&&e[n]&&(null==t?void 0:t[n])!==e[n]){if("model"===n&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new b(`Different value for "${n}" specified in modelParams (${t[n]}) and cachedContent (${e[n]})`)}let r=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new K(this.apiKey,r,n)}}}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[323],()=>n(6191));module.exports=r})();